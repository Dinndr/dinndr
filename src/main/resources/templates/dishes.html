<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Dinndr</title>
<script src="/js/main.js"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css"></link>
</head>
<body>
	<h1>Dinndr</h1>
	<div class="dishqueue" th:each="dish: ${dishes}">
		<h2 class="dishname" th:text="${dish.name}"></h2>
		<div class="dish-photo">
			<img th:src="${dish.image}" />
		</div>

		<button onclick="viewMore()">I'm Interested!</button>
		<button onclick="nextPlease()">Meh.</button>

		<div class="info"
			th:attr="data-longitude=${dish.restaurant.longitude}, data-latitude=${dish.restaurant.latitude}">
			<ul>
				<li th:text="${dish.description}"></li>
				<li th:text="${dish.price}"></li>
				<li th:text="${dish.restaurant.getName()}"></li>
			</ul>
			<!-- To Be Deleted test that tags work -->
			<div th:each="tag: ${dish.tags}">
				<p th:text="${tag.taste}"></p>
			</div>
			<div id="map" style="width: 400px; height: 400px">My map will
				go here</div>
		</div>

		<div class="next" style='display: none'>
			<img th:src="${dish.image}" />
		</div>

		<div class="next">What's next?</div>
	</div>
	<script>
		function myMap() {
			var info = document.querySelector(".info");

			var myLat = parseFloat(info.dataset.latitude);
			var myLng = parseFloat(info.dataset.longitude);

			var myCenter = new google.maps.LatLng(myLat, myLng);
			var myRestaurant = {
				center : myCenter,
				zoom : 15,
			};
			var map = new google.maps.Map(document.getElementById("map"),
					myRestaurant);
			var marker = new google.maps.Marker({
				position : myCenter
			});
			marker.setMap(map);
		}; 
		</script>
	<script
		src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9zXXGyCC23E2uO-nLFXtcFE3TuyWtERU&amp;callback=myMap"></script>
</body>
</html>